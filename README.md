# Android Assets Gen

The Kotlin code generator for your assets, fonts, json, … — Get rid of all String-based APIs.


Inspired by [SwiftGen](https://github.com/SwiftGen/SwiftGen) & [FlutterGen](https://github.com/FlutterGen/flutter_gen)

[AndroidGen](https://github.com/ttpho/AndroidGen): Java version


https://github.com/user-attachments/assets/16b0944c-46f0-4336-8577-1fe789cbb51e



![](https://github.com/user-attachments/assets/dc32073f-8487-47ed-b75b-48eda2570827)




### Motivation

The development of Android applications, when using resources from the Asset folder, often involves hardcoding file paths. This becomes quite challenging as it's unclear where a particular resource is used, when it's accessed, and what feature it impacts. Consequently, a centralized place to manage these asset resources is necessary.

I've written a Python script to traverse all files within the asset folder and generate corresponding Kotlin enum classes based on the folder structure. These enum classes will then manage the file paths within the folder.

Using asset path string directly is not safe.

```
main
└── assets
    └── app_resources
        ├── img_sketch.jpg
        ├── Inter-Bold.ttf
        └── language.json
```

❌  DO NOT

What would happen if you made a typo?

```kotlin
fun loadImageBad(imageView: ImageView) {
    Glide.with(imageView)
        .load(Uri.parse("file:///android_asset/app_resources/img_sketch.jpg"))
        .into(imageView)
}

fun loadJsonFileBad(asset: AssetManager) : String {
    val jsonString = asset.open("lang/language.json")
        .bufferedReader()
        .use { it.readText() }

    return jsonString
}

fun createTypefaceSpanBad(asset: AssetManager) : TypefaceSpan {
    val typeface: Typeface =
        Typeface.createFromAsset(asset, "fonts/Inter-Bold.ttf")
    return  CustomTypefaceSpan("", typeface)
}
```

⭕️ SHOULD

We want to use it safely.

`AppResources.kt` file is generated by  `android_assets_gen.py`

```kotlin

fun loadImage(imageView: ImageView) {
    Glide.with(imageView)
        .load(AppResources.IMG_SKETCH.toUri())
        .into(imageView)
}

fun loadJsonFile(asset: AssetManager) : String {
    val jsonString = asset.open(AppResources.LANGUAGE.path())
        .bufferedReader()
        .use { it.readText() }

    return jsonString
}

fun createTypefaceSpan(asset: AssetManager) : TypefaceSpan {
    val typeface: Typeface =
        Typeface.createFromAsset(asset, AppResources.INTER_BOLD.path())
    return  CustomTypefaceSpan("", typeface)
}
```



### Usage

- Download file: `android_assets_gen.py` and save it in Android Root project

```
<Root Projects>
├── .gradle
├── app
│   └── src
│       ├── androidTest
│       └── main
│           ├── assets
│           │   └── app_resources
│           │       ├── img_sketch.jpg
│           │       ├── Inter-Bold.ttf
│           │       └── language.json
│           ├── java
│           │   └── com.app.demo
│           │       ├── ui.theme
│           │       └── MainActivity.kt
│           ├── res
│           └── AndroidManifest.xml
│       └── test [unitTest]
├── .gitignore
├── build.gradle.kts
├── proguard-rules.pro
├── gradle
│   └── .gitignore
├── android_assets_gen.py                      <---------------
├── build.gradle.kts
├── gradle.properties
├── gradlew
├── gradlew.bat
├── local.properties
├── settings.gradle.kts
├── External Libraries
└── Scratches and Consoles
```

- Run terminal, case input: 

```
python3 android_assets_gen.py 
Enter the package name: com.app.demo
```
- Run terminal, case command line: 

```
python3 android_assets_gen.py com.app.demo
```

### Output Example 

```kotlin
/// GENERATED CODE - DO NOT MODIFY BY HAND
/// *****************************************************
///  Android assets gen file
///  Generated by android_assets_gen.py
/// *****************************************************

package com.app.demo.gen
import android.net.Uri

enum class AppResources(val fileName: String) {
    IMG_SKETCH("img_sketch.jpg"),
    LANGUAGE("language.json"),
    INTER_BOLD("Inter-Bold.ttf")
}

fun AppResources.path() = "app_resources/${this.fileName}"

fun AppResources.toUri(): Uri = Uri.parse("file:///android_asset/${path()}")

```
